/* Naked Form Select v1.0.1 (https://github.com/developerdayo/naked-form-select)
 * Copyright 2019-2020 Sarah Ferguson
 * Licensed under MIT (https://github.com/developerdayo/naked-form-select/LICENSE) */
"use strict";function nakedFormSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"select",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{keywordSearch:{on:!1,placeholder:void 0}};if(document.querySelector(e)){var u=e,p="[data-naked-select-id='".concat(u,"']"),h={keywordSearchInput:function(){var e=document.createElement("div");e.classList.add("keyword-search-wrap");var t=document.createElement("input");void 0!==i.keywordSearch.placeholder&&t.setAttribute("placeholder",i.keywordSearch.placeholder);var n=document.createElement("button");return e.appendChild(t),e.appendChild(n),e},lists:function(){document.querySelectorAll(u).forEach(function(e,t){var n=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}),o=[];n.forEach(function(e){o.push(e.outerText)});var c=n[0].outerText,a=document.createElement("button");a.classList.add("toggle-dropdown"),a.setAttribute("aria-label","Click to expand options"),a.appendChild(document.createTextNode(c));var r=document.createElement("div");r.classList.add("options-wrap");var d=document.createElement("ul");d.setAttribute("data-naked-select-list",t),o.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),d.appendChild(n)}),r.appendChild(d);var l=document.createElement("div");if(l.classList.add("naked-form-select-wrap"),l.setAttribute("data-naked-select",t),l.setAttribute("data-naked-select-id",u),l.appendChild(a),l.appendChild(r),e.parentNode.insertBefore(l,e),l.appendChild(e),!0===i.keywordSearch.on){var s=h.keywordSearchInput();d.insertAdjacentElement("beforebegin",s)}})},currentState:function(){document.querySelectorAll("".concat(p,"[data-naked-select] select")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .toggle-dropdown"));if(e.multiple){var o=Array.from(e.options).filter(function(e){return!0===e.selected}),c=[];o.forEach(function(e){c.push(e.innerText)}),n.textContent=c.join(", "),-1===e.options.selectedIndex&&(n.textContent=e.options[0].outerText)}else{var a=e.options.selectedIndex;n.textContent=e.options[a].outerText}})}},d={globalClose:function(){document.querySelector("body").addEventListener("click",function(n){document.querySelectorAll("[data-naked-select]").forEach(function(e,t){!e.classList.contains("open")||n.target.classList.contains("options-wrap")||n.target.classList.contains("toggle-dropdown")||null!==n.target.parentNode.getAttribute("data-naked-select-list")||n.target.parentNode.classList.contains("keyword-search-wrap")||(document.querySelectorAll("[data-naked-select]").forEach(function(e){e.classList.remove("open")}),document.querySelectorAll("[data-naked-select] .options-wrap").forEach(function(e){e.style.height="0"}))})})},toggle:function(){document.querySelectorAll("".concat(p,"[data-naked-select] .toggle-dropdown")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"']")),o=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .options-wrap"));o.style.height="0",e.addEventListener("click",function(e){e.preventDefault();var t=o.scrollHeight;n.classList.contains("open")?(n.classList.remove("open"),o.style.height="0"):(n.classList.add("open"),o.style.height="".concat(t,"px"))}),d.globalClose()})},select:function(){document.querySelectorAll("".concat(p,"[data-naked-select] li")).forEach(function(s,e){s.addEventListener("click",function(){var e=s.getAttribute("data-index"),t=s.textContent,n=s.parentNode.getAttribute("data-naked-select-list"),o=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] select"));o[0].value=t,o.options[parseInt(e)].selected=!0;var c=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .toggle-dropdown"));if(o.multiple){s.classList.contains("selected")?(s.classList.remove("selected"),o.options[parseInt(e)].selected=!1):(s.classList.add("selected"),o.options[parseInt(e)].selected=!0);var a=Array.from(o.options).filter(function(e){return!0===e.selected}),r=[];a.forEach(function(e){r.push(e.innerText)}),c.textContent=r.join(", "),-1===o.options.selectedIndex&&(c.textContent=o.options[0].outerText)}else{var d=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"']")),l=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap"));d.classList.contains("open")?(d.classList.remove("open"),l.style.height="0"):(d.classList.add("open"),l.style.height=listHeight),document.querySelectorAll("".concat(p,"[data-naked-select='").concat(n,"'] li")).forEach(function(e){e.classList.remove("selected")}),s.classList.contains("selected")?s.classList.remove("selected"):s.classList.add("selected"),c.textContent=t}})})},keywordSearch:function(){!0===i.keywordSearch.on&&document.querySelectorAll(u).forEach(function(e,c){var a=[];Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}).forEach(function(e){a.push(e.outerText)});var t=e.previousElementSibling.childNodes[0].childNodes[0],r=e.previousElementSibling.childNodes[1];t.addEventListener("input",function(e){r.innerHTML="";var t=e.target.value.toLowerCase();a.filter(function(e){if(e.toLowerCase().match(t))return e}).forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),r.appendChild(n)}),d.select();var n=r.offsetHeight,o=document.querySelector("".concat(p,"[data-naked-select='").concat(c,"'] .keyword-search-wrap")).offsetHeight;document.querySelector("".concat(p,"[data-naked-select='").concat(c,"'] .options-wrap")).style.height=n+o})})}};h.lists(),h.currentState(),d.toggle(),d.select(),d.keywordSearch()}}