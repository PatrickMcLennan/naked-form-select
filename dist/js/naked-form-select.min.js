/* Naked Form Select v1.0.1 (https://github.com/developerdayo/naked-form-select)
 * Copyright 2019-2020 Sarah Ferguson
 * Licensed under MIT (https://github.com/developerdayo/naked-form-select/LICENSE) */
"use strict";function nakedFormSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"select",u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{keywordSearch:{on:!1,placeholder:void 0}};if(document.querySelector(e)){var p=e,i="[data-naked-select-id='".concat(p,"']"),h={keywordSearchInput:function(){var e=document.createElement("div");e.classList.add("keyword-search-wrap");var t=document.createElement("input");void 0!==u.keywordSearch.placeholder&&t.setAttribute("placeholder",u.keywordSearch.placeholder);var n=document.createElement("button");return e.appendChild(t),e.appendChild(n),e},lists:function(){document.querySelectorAll(p).forEach(function(e,t){var n=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}),c=[];n.forEach(function(e){c.push(e.outerText)});var a=n[0].outerText,o=document.createElement("span");o.classList.add("placeholder"),o.appendChild(document.createTextNode(a));var r=document.createElement("div");r.classList.add("options-wrap");var d=document.createElement("ul");d.setAttribute("data-naked-select-list",t),c.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),d.appendChild(n)}),r.appendChild(d);var l=document.createElement("div");l.classList.add("naked-form-select-wrap"),l.setAttribute("data-naked-select",t),l.setAttribute("data-naked-select-id",p);var s=document.createElement("button");if(s.classList.add("toggle-dropdown"),s.appendChild(document.createTextNode("Open to Select Options")),l.appendChild(o),l.appendChild(s),l.appendChild(r),e.parentNode.insertBefore(l,e),l.appendChild(e),!0===u.keywordSearch.on){var i=h.keywordSearchInput();d.insertAdjacentElement("beforebegin",i)}})},currentState:function(){document.querySelectorAll("".concat(i,"[data-naked-select] select")).forEach(function(e,t){var n=document.querySelector("".concat(i,"[data-naked-select='").concat(t,"'] .placeholder"));if(e.multiple){var c=Array.from(e.options).filter(function(e){return!0===e.selected}),a=[];c.forEach(function(e){a.push(e.innerText)}),n.textContent=a.join(", "),-1===e.options.selectedIndex&&(n.textContent=e.options[0].outerText)}else{var o=e.options.selectedIndex;n.textContent=e.options[o].outerText}})}},d={globalClose:function(){document.querySelector("body").addEventListener("click",function(n){document.querySelectorAll("[data-naked-select]").forEach(function(e,t){!e.classList.contains("open")||n.target.classList.contains("options-wrap")||n.target.classList.contains("toggle-dropdown")||null!==n.target.parentNode.getAttribute("data-naked-select-list")||n.target.parentNode.classList.contains("keyword-search-wrap")||(document.querySelectorAll("[data-naked-select]").forEach(function(e){e.classList.remove("open")}),document.querySelectorAll("[data-naked-select] .options-wrap").forEach(function(e){e.style.height="0"}))})})},toggle:function(){document.querySelectorAll("".concat(i,"[data-naked-select] .toggle-dropdown")).forEach(function(e,t){var n=document.querySelector("".concat(i,"[data-naked-select='").concat(t,"']")),c=document.querySelector("".concat(i,"[data-naked-select='").concat(t,"'] .options-wrap"));c.style.height="0",e.addEventListener("click",function(){var e=c.scrollHeight;n.classList.contains("open")?(n.classList.remove("open"),c.style.height="0"):(n.classList.add("open"),c.style.height=e)}),d.globalClose()})},select:function(){document.querySelectorAll("".concat(i,"[data-naked-select] li")).forEach(function(s,e){s.addEventListener("click",function(){var e=s.getAttribute("data-index"),t=s.textContent,n=s.parentNode.getAttribute("data-naked-select-list"),c=document.querySelector("".concat(i,"[data-naked-select='").concat(n,"'] select"));c[0].value=t,c.options[parseInt(e)].selected=!0;var a=document.querySelector("".concat(i,"[data-naked-select='").concat(n,"'] .placeholder"));if(c.multiple){s.classList.contains("selected")?(s.classList.remove("selected"),c.options[parseInt(e)].selected=!1):s.classList.add("selected");var o=Array.from(c.options).filter(function(e){return!0===e.selected}),r=[];o.forEach(function(e){r.push(e.innerText)}),a.textContent=r.join(", ")}else{var d=document.querySelector("".concat(i,"[data-naked-select='").concat(n,"']")),l=document.querySelector("".concat(i,"[data-naked-select='").concat(n,"'] .options-wrap"));d.classList.contains("open")?(d.classList.remove("open"),l.style.height="0"):(d.classList.add("open"),l.style.height=listHeight),document.querySelectorAll("".concat(i,"[data-naked-select='").concat(n,"'] li")).forEach(function(e){e.classList.remove("selected")}),s.classList.contains("selected")?s.classList.remove("selected"):s.classList.add("selected"),a.textContent=t}})})},keywordSearch:function(){!0===u.keywordSearch.on&&document.querySelectorAll(p).forEach(function(e,a){var o=[];Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}).forEach(function(e){o.push(e.outerText)});var t=e.previousElementSibling.childNodes[0].childNodes[0],r=e.previousElementSibling.childNodes[1];t.addEventListener("input",function(e){r.innerHTML="";var t=e.target.value.toLowerCase();o.filter(function(e){if(e.toLowerCase().match(t))return e}).forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),r.appendChild(n)}),d.select();var n=r.offsetHeight,c=document.querySelector("".concat(i,"[data-naked-select='").concat(a,"'] .keyword-search-wrap")).offsetHeight;document.querySelector("".concat(i,"[data-naked-select='").concat(a,"'] .options-wrap")).style.height=n+c})})}};h.lists(),h.currentState(),d.toggle(),d.select(),d.keywordSearch()}}