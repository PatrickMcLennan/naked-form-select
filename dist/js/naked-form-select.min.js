/* Naked Form Select v1.0.9 (https://github.com/developerdayo/naked-form-select)
 * Copyright 2019-2020 Sarah Ferguson
 * Licensed under MIT (https://github.com/developerdayo/naked-form-select/LICENSE) */
"use strict";function nakedFormSelect(){var u,s,p,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"select",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.context,o=void 0===n?{value:void 0,queryDocument:!1}:n,c=t.keywordSearch,f=void 0===c?{on:!1,placeholder:void 0}:c;void 0===o.queryDocument?o.queryDocument=!1:o.queryDocument=o.queryDocument;var h={index:function(){setTimeout(function(){u.querySelectorAll("[data-naked-select-id]").forEach(function(e,t){e.setAttribute("data-index",t)})},1)},keywordSearchInput:function(){var e=document.createElement("div");e.classList.add("keyword-search-wrap");var t=document.createElement("input");return void 0!==f.placeholder&&t.setAttribute("placeholder",f.placeholder),e.appendChild(t),e},lists:function(){u.querySelectorAll(s).forEach(function(e,t){var n=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}),o=[];n.forEach(function(e){o.push(e.textContent)});var c=n[0].textContent,a=document.createElement("button");a.classList.add("toggle-dropdown"),a.setAttribute("aria-label","Click to expand options"),a.textContent=c;var r=document.createElement("div");r.classList.add("options-wrap");var l=document.createElement("ul");l.setAttribute("data-naked-select-list",t),o.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),l.appendChild(n)}),r.appendChild(l);var i=document.createElement("div");if(i.classList.add("naked-form-select-wrap"),i.setAttribute("data-naked-select-id",s),i.setAttribute("data-naked-select",t),i.appendChild(a),i.appendChild(r),e.parentNode.insertBefore(i,e),i.appendChild(e),!0===f.on){var d=h.keywordSearchInput();l.insertAdjacentElement("beforebegin",d)}},h.index())},currentState:function(){u.querySelectorAll("".concat(p,"[data-naked-select] select")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .toggle-dropdown"));if(e.multiple){var o=Array.from(e.options).filter(function(e){return!0===e.selected}),c=[];o.forEach(function(e){c.push(e.innerText)}),n.textContent=c.join(", "),-1===e.options.selectedIndex&&(n.textContent=e.options[0].textContent)}else{var a=e.options.selectedIndex;n.textContent=e.options[a].textContent}})}},v={triggerEvent:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}},globalClose:function(){document.querySelector("body").addEventListener("click",function(e){for(var t=Array.from(document.querySelectorAll("[data-naked-select]")),n=0;n<t.length;n++)if(t[n].classList.contains("open")&&!t[n].contains(e.target)){var o=parseInt(t[n].getAttribute("data-index"));t[n].classList.remove("open"),document.querySelector("[data-naked-select][data-index='".concat(o,"'] .options-wrap")).style.height="0"}})},toggle:function(){u.querySelectorAll("".concat(p,"[data-naked-select] .toggle-dropdown")).forEach(function(e,t){var n=u.querySelector("".concat(p,"[data-naked-select='").concat(t,"']")),o=u.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .options-wrap"));o.style.height="0",e.addEventListener("click",function(e){e.preventDefault();var t=o.scrollHeight;n.classList.contains("open")?(n.classList.remove("open"),o.style.height="0"):(n.classList.add("open"),o.style.height="".concat(t,"px"))})},v.globalClose())},select:function(){u.querySelectorAll("".concat(p,"[data-naked-select] li")).forEach(function(s,e){s.addEventListener("click",function(){var e=s.getAttribute("data-index"),t=s.textContent,n=s.parentNode.getAttribute("data-naked-select-list"),o=u.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] select")),c=u.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap")).scrollHeight;o.options[parseInt(e)].selected=!0,v.triggerEvent(o,"change");var a=u.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .toggle-dropdown"));if(o.multiple){s.classList.contains("selected")?(s.classList.remove("selected"),o.options[parseInt(e)].selected=!1):(s.classList.add("selected"),o.options[parseInt(e)].selected=!0);var r=Array.from(o.options).filter(function(e){return!0===e.selected}),l=[];r.forEach(function(e){l.push(e.innerText)}),a.textContent=l.join(", "),-1===o.options.selectedIndex&&(a.textContent=o.options[0].textContent)}else{var i=u.querySelector("".concat(p,"[data-naked-select='").concat(n,"']")),d=u.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap"));i.classList.contains("open")?(i.classList.remove("open"),d.style.height="0"):(i.classList.add("open"),d.style.height="".concat(c,"px")),u.querySelectorAll("".concat(p,"[data-naked-select='").concat(n,"'] li")).forEach(function(e){e.classList.remove("selected")}),s.classList.contains("selected")?s.classList.remove("selected"):s.classList.add("selected"),a.textContent=t}})})},keywordSearch:function(){!0===f.on&&(u.querySelectorAll(p).forEach(function(e){e.setAttribute("keywordSearch","on")}),u.querySelectorAll(s).forEach(function(e,a){var t=[],r=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName});r.forEach(function(e){t.push(e.textContent)});var n=e.previousElementSibling.childNodes[0].childNodes[0],l=e.previousElementSibling.childNodes[1],i=u.querySelectorAll("[data-naked-select-id='".concat(s,"'] .options-wrap li"));i.forEach(function(e){e.classList.add("match")}),n.addEventListener("input",function(e){var t=e.target.value.toLowerCase(),n=r.filter(function(e){if(e.textContent.toLowerCase().match(t))return e});i.forEach(function(e){e.classList.remove("match")}),n.forEach(function(t){i.forEach(function(e){parseInt(e.getAttribute("data-index"))===t.index&&e.classList.add("match")})});var o=l.offsetHeight,c=u.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .keyword-search-wrap")).offsetHeight;u.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .options-wrap")).style.height=o+c+"px"})}))}};u=void 0!==o.value&&!1===o.queryDocument?o.value:void 0!==o.value&&!0===o.queryDocument?document.querySelector(o.value):document,p="[data-naked-select-id='".concat(s=e,"']"),h.lists(),h.currentState(),v.toggle(),v.select(),v.keywordSearch()}