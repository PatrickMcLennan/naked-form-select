/* Naked Form Select v1.0.7 (https://github.com/developerdayo/naked-form-select)
 * Copyright 2019-2020 Sarah Ferguson
 * Licensed under MIT (https://github.com/developerdayo/naked-form-select/LICENSE) */

"use strict";function nakedFormSelect(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"select",t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).keywordSearch,s=void 0===t?{on:!1,placeholder:void 0}:t;if(document.querySelector(e)){var u=e,p="[data-naked-select-id='".concat(u,"']"),f={index:function(){setTimeout(function(){document.querySelectorAll("[data-naked-select-id]").forEach(function(e,t){e.setAttribute("data-index",t)})},1)},keywordSearchInput:function(){var e=document.createElement("div");e.classList.add("keyword-search-wrap");var t=document.createElement("input");return void 0!==s.placeholder&&t.setAttribute("placeholder",s.placeholder),e.appendChild(t),e},lists:function(){document.querySelectorAll(u).forEach(function(e,t){var n=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName}),c=[];n.forEach(function(e){c.push(e.outerText)});var o=n[0].outerText,a=document.createElement("button");a.classList.add("toggle-dropdown"),a.setAttribute("aria-label","Click to expand options"),a.appendChild(document.createTextNode(o));var r=document.createElement("div");r.classList.add("options-wrap");var d=document.createElement("ul");d.setAttribute("data-naked-select-list",t),c.forEach(function(e,t){var n=document.createElement("li");n.setAttribute("data-index",t),n.appendChild(document.createTextNode(e)),d.appendChild(n)}),r.appendChild(d);var l=document.createElement("div");if(l.classList.add("naked-form-select-wrap"),l.setAttribute("data-naked-select-id",u),l.setAttribute("data-naked-select",t),l.appendChild(a),l.appendChild(r),e.parentNode.insertBefore(l,e),l.appendChild(e),!0===s.on){var i=f.keywordSearchInput();d.insertAdjacentElement("beforebegin",i)}},f.index())},currentState:function(){document.querySelectorAll("".concat(p,"[data-naked-select] select")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .toggle-dropdown"));if(e.multiple){var c=Array.from(e.options).filter(function(e){return!0===e.selected}),o=[];c.forEach(function(e){o.push(e.innerText)}),n.textContent=o.join(", "),-1===e.options.selectedIndex&&(n.textContent=e.options[0].outerText)}else{var a=e.options.selectedIndex;n.textContent=e.options[a].outerText}})}},h={triggerEvent:function(e,t){if("createEvent"in document){var n=document.createEvent("HTMLEvents");n.initEvent(t,!1,!0),e.dispatchEvent(n)}},globalClose:function(){document.querySelector("body").addEventListener("click",function(e){for(var t=Array.from(document.querySelectorAll("[data-naked-select]")),n=0;n<t.length;n++)if(t[n].classList.contains("open")&&!t[n].contains(e.target)){var c=parseInt(t[n].getAttribute("data-index"));t[n].classList.remove("open"),document.querySelector("[data-naked-select][data-index='".concat(c,"'] .options-wrap")).style.height="0"}})},toggle:function(){document.querySelectorAll("".concat(p,"[data-naked-select] .toggle-dropdown")).forEach(function(e,t){var n=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"']")),c=document.querySelector("".concat(p,"[data-naked-select='").concat(t,"'] .options-wrap"));c.style.height="0",e.addEventListener("click",function(e){e.preventDefault();var t=c.scrollHeight;n.classList.contains("open")?(n.classList.remove("open"),c.style.height="0"):(n.classList.add("open"),c.style.height="".concat(t,"px"))})},h.globalClose())},select:function(){document.querySelectorAll("".concat(p,"[data-naked-select] li")).forEach(function(s,e){s.addEventListener("click",function(){var e=s.getAttribute("data-index"),t=s.textContent,n=s.parentNode.getAttribute("data-naked-select-list"),c=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] select")),o=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap")).scrollHeight;c.options[parseInt(e)].selected=!0,h.triggerEvent(c,"change");var a=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .toggle-dropdown"));if(c.multiple){s.classList.contains("selected")?(s.classList.remove("selected"),c.options[parseInt(e)].selected=!1):(s.classList.add("selected"),c.options[parseInt(e)].selected=!0);var r=Array.from(c.options).filter(function(e){return!0===e.selected}),d=[];r.forEach(function(e){d.push(e.innerText)}),a.textContent=d.join(", "),-1===c.options.selectedIndex&&(a.textContent=c.options[0].outerText)}else{var l=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"']")),i=document.querySelector("".concat(p,"[data-naked-select='").concat(n,"'] .options-wrap"));l.classList.contains("open")?(l.classList.remove("open"),i.style.height="0"):(l.classList.add("open"),i.style.height="".concat(o,"px")),document.querySelectorAll("".concat(p,"[data-naked-select='").concat(n,"'] li")).forEach(function(e){e.classList.remove("selected")}),s.classList.contains("selected")?s.classList.remove("selected"):s.classList.add("selected"),a.textContent=t}})})},keywordSearch:function(){!0===s.on&&(document.querySelectorAll(p).forEach(function(e){e.setAttribute("keywordSearch","on")}),document.querySelectorAll(u).forEach(function(e,a){var t=[],r=Array.from(e.childNodes).filter(function(e){return"OPTION"===e.nodeName});r.forEach(function(e){t.push(e.outerText)});var n=e.previousElementSibling.childNodes[0].childNodes[0],d=e.previousElementSibling.childNodes[1],l=document.querySelectorAll("[data-naked-select-id='".concat(u,"'] .options-wrap li"));l.forEach(function(e){e.classList.add("match")}),n.addEventListener("input",function(e){var t=e.target.value.toLowerCase(),n=r.filter(function(e){if(e.outerText.toLowerCase().match(t))return e});l.forEach(function(e){e.classList.remove("match")}),n.forEach(function(t){l.forEach(function(e){parseInt(e.getAttribute("data-index"))===t.index&&e.classList.add("match")})});var c=d.offsetHeight,o=document.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .keyword-search-wrap")).offsetHeight;document.querySelector("".concat(p,"[data-naked-select='").concat(a,"'] .options-wrap")).style.height=c+o+"px"})}))}};f.lists(),f.currentState(),h.toggle(),h.select(),h.keywordSearch()}}